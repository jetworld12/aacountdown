<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UTC Blinking Red Countdown</title>
<style>
  body {
    background-color: black;
    color: red;
    font-family: monospace, monospace;
    text-align: center;
    font-size: 2em;
    padding-top: 50px;
  }

  #countdown {
    visibility: visible;
  }
</style>
</head>
<body>
  <div id="countdown">--:--:--:--:---</div>

<script>
(function () {
  const STORAGE_KEY = 'redcounter_target';
  const THIRTY_DAYS_MS = 30 * 24 * 60 * 60 * 1000;

  let targetUTC = localStorage.getItem(STORAGE_KEY);
  if (!targetUTC) {
    targetUTC = Date.now() + THIRTY_DAYS_MS;
    localStorage.setItem(STORAGE_KEY, targetUTC);
  } else {
    targetUTC = Number(targetUTC);
  }

  const countdownEl = document.getElementById("countdown");
  let lastBlink = 0;
  let blinkVisible = true;
  const BLINK_INTERVAL = 1100; // ms

  function updateCountdown() {
    const now = Date.now();
    const diff = targetUTC - now;

    if (diff <= 0) {
      countdownEl.textContent = "00:00:00:00:000";
      countdownEl.style.visibility = 'visible';
      return; // Stop blinking when done
    }

    const totalMs = diff;
    const totalSeconds = Math.floor(totalMs / 1000);

    const days = String(Math.floor(totalSeconds / (3600 * 24))).padStart(2, '0');
    const hours = String(Math.floor((totalSeconds % (3600 * 24)) / 3600)).padStart(2, '0');
    const minutes = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, '0');
    const seconds = String(totalSeconds % 60).padStart(2, '0');
    const ms = String(totalMs % 1000).padStart(3, '0');

    countdownEl.textContent = `${days}:${hours}:${minutes}:${seconds}:${ms}`;
  }

  function tick(timestamp) {
    updateCountdown();

    if (!lastBlink) lastBlink = timestamp;

    if (timestamp - lastBlink >= BLINK_INTERVAL) {
      blinkVisible = !blinkVisible;
      countdownEl.style.visibility = blinkVisible ? 'visible' : 'hidden';
      lastBlink = timestamp;
    }

    requestAnimationFrame(tick);
  }

  requestAnimationFrame(tick);
})();
</script>
</body>
</html>
